import fs from "node:fs";
import path from "node:path";

const ROOT = process.cwd();

const FILES = [
  "README.md",
  "CHANGELOG.md",
  "CONTRIBUTING.md",
  "SECURITY.md",
  "ACKNOWLEDMENTS.md",
  "docs/README.md",
  "docs/getting-started.md",
  "docs/faq.md",
  "docs/architecture.md",
  "docs/api.md",
  "docs/configuration.md",
  "docs/development.md",
  "docs/security.md",
  "docs/troubleshooting.md",
];

const header =
  "# AbstractObserver — llms-full\n\n" +
  "> Combined, LLM-friendly documentation context (core docs + supporting docs). Source of truth remains the code.\n\n" +
  "Generated by `scripts/generate-llms-full.mjs` — do not edit by hand.\n\n" +
  "This file complements `llms.txt` by inlining the key docs so an agent can reason about the project without fetching multiple files.\n";

function readUtf8(p) {
  return fs.readFileSync(path.resolve(ROOT, p), "utf8").trimEnd();
}

function main() {
  const chunks = [header];

  for (const p of FILES) {
    chunks.push(`\n\n## ${p}\n\n`);
    chunks.push(readUtf8(p));
    chunks.push("\n\n---\n");
  }

  const out = chunks.join("").trimEnd() + "\n";
  fs.writeFileSync(path.resolve(ROOT, "llms-full.txt"), out, "utf8");
}

main();

